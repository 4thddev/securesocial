<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>SecureSocial - Authentication for Play Framework Applications</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="author" content="">
<!-- Le styles --><link media="screen" rel="stylesheet" type="text/css" href="../stylesheets/bootstrap.min.css">
<link media="screen" rel="stylesheet" type="text/css" href="../stylesheets/bootstrap-responsive.min.css">
<link media="screen" rel="stylesheet" type="text/css" href="../stylesheets/pygment.css">
<style type="text/css">
      body {
        padding-top: 60px;
        padding-bottom: 40px;
      }
    </style>
<!-- HTML5 shim, for IE6-8 support of HTML5 elements --><!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>
<body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../">SecureSocial</a>
          <div class="nav-collapse collapse">
            <ul class="nav">
<li><a href="../">Home</a></li>
              <li class="active"><a href="getting-started.html">Getting Started</a></li>
              <li><a href="https://github.com/jaliss/securesocial">View on Github</a></li>                            
            </ul>
</div>
<!--/.nav-collapse -->
        </div>
      </div>
    </div>


    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span3">
          <div class="sidebar-nav">
  <ul class="nav nav-list">
<li class="nav-header">Contents</li>
        
    	<li>
    		<a href="getting-started.html">Getting Started</a> 
    	</li>
   	    
    	<li>
    		<a href="installation.html">Installation</a> 
    	</li>
   	    
    	<li>
    		<a href="configuration.html">Configuration</a> 
    	</li>
   	    
    	<li>
    		<a href="securing.html">Securing your Actions</a> 
    	</li>
   	    
    	<li>
    		<a href="user-service.html">UserService</a> 
    	</li>
   	    
    	<li>
    		<a href="views-customization.html">Views and Emails Customization</a> 
    	</li>
   	    
    	<li>
    		<a href="password-change.html">Password Change Page</a> 
    	</li>
   	    
    	<li class="active">
    		<a href="password-plugins.html">Password Plugins</a> 
    	</li>
   	    
    	<li>
    		<a href="faqs.html">FAQs</a> 
    	</li>
   	    
    	<li>
    		<a href="changelog.html">Change Log</a> 
    	</li>
   	
    </ul>
</div>     
        </div>

        <div class="span9">       
          <section id="overview"><div class="page-header">
              <h1>Password Plugins</h1>

<p>When users sign up and enter a password it is required to enforce some strength on them to disallow really week ones.  Storing passwords in clear text is not recommended either.  To address these two things SecureSocial uses the following plugins:</p>

<ul>
<li><p><code>PasswordValidador</code>: Used when users submit the registration form to validate the password.</p></li>
<li><p><code>PasswordHasher</code>: Used to hash the password entered by the user prior to saving it.</p></li>
</ul>
<p>The modules comes with default implementations for each:</p>

<ul>
<li><p><code>DefaultPasswordValidator</code>: A validator that restricts passwords to a minimum length. By default the length is 8 but can be changed by setting the <code>minimumPasswordLength</code> in the properties file.</p></li>
<li><p><code>BCryptPasswordHasher</code>: A password hasher based on the bcrypt algorithm. </p></li>
</ul>
<p>This will be good enough for many cases, but if you need to change the way password length/strength is enforced and/or how they are hashed you can write your own plugins and register them in the <code>play.plugins</code> file instead of the ones provided by SecureSocial.</p>

<h2>PasswordValidator</h2>

<h3>Scala</h3>

<p>For Scala, you need to implement the <code>PasswordValidator</code> trait:</p>

<div class="highlight"><pre><span class="k">trait</span> <span class="nc">PasswordValidator</span> <span class="k">extends</span> <span class="nc">Plugin</span> <span class="o">{</span>
    <span class="k">def</span> <span class="n">isValid</span><span class="o">(</span><span class="n">password</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">Boolean</span>
    <span class="k">def</span> <span class="n">errorMessage</span><span class="k">:</span> <span class="kt">String</span>
<span class="o">}</span>
</pre></div>

<ul>
<li><p><code>isValid</code>: Must return true or false depending on whether the supplied passwors is good enough for the validator.</p></li>
<li><p><code>errorMessage</code>: An error message that will be shown on the sign up page if the password is invalid.</p></li>
</ul>
<p>You will also need to add a constructor that receives an <code>Application</code> instance.</p>

<h3>Java</h3>

<p>For Java, create a subclass of <code>BasePasswordValidator</code> and implement the <code>isValid</code> and <code>errorMessage</code> methods as described above and also add a public constructor that receives an <code>Application</code> instance.</p>

<div class="highlight"><pre><span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isValid</span><span class="o">(</span><span class="n">String</span> <span class="n">password</span><span class="o">)</span>
<span class="kd">public</span> <span class="n">String</span> <span class="nf">errorMessage</span><span class="o">()</span>    
</pre></div>

<h2>PasswordHasher</h2>

<h3>Scala</h3>

<p>For Scala, you need to implement the <code>PasswordHasher</code> trait:</p>

<div class="highlight"><pre><span class="k">trait</span> <span class="nc">PasswordHasher</span> <span class="k">extends</span> <span class="nc">Plugin</span> <span class="o">{</span>
    <span class="k">def</span> <span class="n">hash</span><span class="o">(</span><span class="n">plainPassword</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">PasswordInfo</span>
    <span class="k">def</span> <span class="n">matches</span><span class="o">(</span><span class="n">passwordInfo</span><span class="k">:</span> <span class="kt">PasswordInfo</span><span class="o">,</span> <span class="n">suppliedPassword</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">Boolean</span>
<span class="o">}</span>
</pre></div>

<ul>
<li><p><code>hash</code>: this method hashes the password and returns a <code>PasswordInfo</code> containing the hashed password and optionally the salt used to hash it.</p></li>
<li><p><code>matches</code>: checks if the <code>suppliedPassword</code> matches the hashed one in <code>passwordInfo</code>.</p></li>
</ul>
<h3>Java</h3>

<p>For Java, extend the <code>BasePasswordHasher</code> class and implement the <code>doHash</code> and <code>doMatch</code> mathods:</p>

<div class="highlight"><pre><span class="n">PasswordInfo</span> <span class="nf">doHash</span><span class="o">(</span><span class="n">String</span> <span class="n">plainPassword</span><span class="o">);</span>    
<span class="kt">boolean</span> <span class="nf">doMatch</span><span class="o">(</span><span class="n">PasswordInfo</span> <span class="n">passwordInfo</span><span class="o">,</span> <span class="n">String</span> <span class="n">suppliedPassword</span><span class="o">);</span>
</pre></div>

            </div>
          </section>
</div>
      </div>
    </div>
    <footer style="padding: 30px 0;margin-top: 70px;border-top: 1px solid #E5E5E5;background-color: whiteSmoke;"><div class="container">
		<p> <a href="https://github.com/jaliss/securesocial">View on Github</a></p>        
        <p>Designed and developed by <a href="http://twitter.com/jaliss" target="_blank">@jaliss</a>.</p>
        <p>Code licensed under <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank">Apache License v2.0</a>, documentation under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.</p>
        <p>Â© 2011-2012 Jorge Aliss       
    </p>
</div>
       
</footer><script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-1441023-12']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</body>
</html>
