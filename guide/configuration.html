<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>SecureSocial - Authentication for Play Framework Applications</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="author" content="">
<!-- Le styles --><link media="screen" rel="stylesheet" type="text/css" href="../stylesheets/bootstrap.min.css">
<link media="screen" rel="stylesheet" type="text/css" href="../stylesheets/bootstrap-responsive.min.css">
<link media="screen" rel="stylesheet" type="text/css" href="../stylesheets/pygment.css">
<style type="text/css">
      body {
        padding-top: 60px;
        padding-bottom: 40px;
      }
    </style>
<!-- HTML5 shim, for IE6-8 support of HTML5 elements --><!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>
<body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../">SecureSocial</a>
          <div class="nav-collapse collapse">
            <ul class="nav">
<li><a href="../">Home</a></li>
              <li class="active"><a href="getting-started.html">Getting Started</a></li>
              <li><a href="https://github.com/jaliss/securesocial">View on Github</a></li>                            
            </ul>
</div>
<!--/.nav-collapse -->
        </div>
      </div>
    </div>


    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span3">
          <div class="sidebar-nav">
  <ul class="nav nav-list">
<li class="nav-header">Contents</li>
        
    	<li>
    		<a href="getting-started.html">Getting Started</a> 
    	</li>
   	    
    	<li>
    		<a href="installation.html">Installation</a> 
    	</li>
   	    
    	<li class="active">
    		<a href="configuration.html">Configuration</a> 
    	</li>
   	    
    	<li>
    		<a href="securing.html">Securing your Actions</a> 
    	</li>
   	    
    	<li>
    		<a href="authorization.html">Adding Authorization</a> 
    	</li>
   	    
    	<li>
    		<a href="user-service.html">UserService</a> 
    	</li>
   	    
    	<li>
    		<a href="views-customization.html">Views and Emails Customization</a> 
    	</li>
   	    
    	<li>
    		<a href="password-change.html">Password Change Page</a> 
    	</li>
   	    
    	<li>
    		<a href="password-plugins.html">Password Plugins</a> 
    	</li>
   	    
    	<li>
    		<a href="faqs.html">FAQs</a> 
    	</li>
   	    
    	<li>
    		<a href="changelog.html">Change Log</a> 
    	</li>
   	
    </ul>
</div>     
        </div>

        <div class="span9">       
          <section id="overview"><div class="page-header">
              <h1>Configuration</h1>

<p>Create a <code>securesocial.conf</code> file within your app's conf directory and include it from your <code>application.conf</code> file.  Eg:</p>

<div class="highlight"><pre>include <span class="s2">"securesocial.conf"</span>
</pre></div>

<h2>Mail settings</h2>

<p>If you plan to use the <code>UsernamePasswordProvider</code> you need to configure your mail service. SecureSocial uses the <a href="https://github.com/typesafehub/play-plugins/tree/master/mailer">mailer plugin</a> from Typesafe.</p>

<p>These settings go in the <code>smtp</code> section of the <code>securesocial.conf</code> file:</p>

<div class="highlight"><pre>smtp <span class="o">{</span>
    <span class="nv">host</span><span class="o">=</span>smtp.gmail.com
    <span class="c">#port=25</span>
    <span class="nv">ssl</span><span class="o">=</span><span class="nb">true</span>
<span class="nb">    </span><span class="nv">user</span><span class="o">=</span><span class="s2">"your_user"</span>
    <span class="nv">password</span><span class="o">=</span>your_password
    <span class="nv">from</span><span class="o">=</span><span class="s2">"your_from_address"</span>
<span class="o">}</span>
</pre></div>

<h2>Global Settings</h2>

<ul>
<li><p><code>onLoginGoTo</code>: SecureSocial tries to redirect the user back to the page they intended to access after login.  There are cases where this can't be done (eg: the user tried to POST a form) or accessed the login page directly.  Adding the <code>onLoginGoto</code> property allows SecureSocial to redirect the user to the page you need.  </p></li>
<li><p><code>onLogoutGoTo</code>: The page where the user is redirected to after logging out.</p></li>
<li><p><code>ssl</code>: You can enable SSL for OAuth callbacks and for the login, signup and reset password actions of the <code>UsernamePasswordProvider</code> (you'll want this in production mode).</p></li>
<li><p><code>sessionTimeOut</code>: Specifies the session time out in minutes. Users get logged out automatically after being inactive for the minutes specified in this property.  The default is 60 minutes.</p></li>
<li><p><code>assetsController</code>: This setting is optional.  It is only needed if you are not using the default Assets controller provided by Play.  The value must be the full qualified class name of your controller prepended by the word Reverse.</p></li>
</ul>
<p>All these settings go inside a <code>securesocial</code> section as shown below:</p>

<div class="highlight"><pre>securesocial <span class="o">{</span>
    <span class="c">#</span>
    <span class="c"># Where to redirect the user if SecureSocial can't figure that out from</span>
    <span class="c"># the request that was received before authenticating the user</span>
    <span class="c">#</span>
    <span class="nv">onLoginGoTo</span><span class="o">=</span>/

    <span class="c">#</span>
    <span class="c"># Where to redirect the user when he logs out. If not set SecureSocial will redirect to the login page</span>
    <span class="c">#</span>
    <span class="nv">onLogoutGoTo</span><span class="o">=</span>/login

    <span class="c">#</span>
    <span class="c"># Enable SSL for oauth callback urls and login/signup/password recovery pages</span>
    <span class="c">#</span>
    <span class="nv">ssl</span><span class="o">=</span><span class="nb">false</span>   

    <span class="c">#</span>
    <span class="c"># Session Timeout In Minutes</span>
    <span class="c">#</span>
    <span class="nv">sessionTimeOut</span><span class="o">=</span>60

    <span class="c">#</span>
    <span class="c"># The controller class for assets. This is optional, only required</span>
    <span class="c"># when you use a custom class for Assets.</span>
    <span class="c">#</span>
    <span class="nv">assetsController</span><span class="o">=</span>controllers.ReverseMyCustomAssetsController           
<span class="o">}</span>
</pre></div>

<h2>Provider settings</h2>

<p>The configuration for each provider needs to be added within the <code>securesocial</code> section as well. </p>

<h3>Username Passsword Provider</h3>

<p>The following properties can be configured:</p>

<ul>
<li><p><code>withUserNameSupport</code>: depending on your app you can decide to use email addresses or usernames for login.  When this setting is set to <code>false</code>, the username field will be hidden in the sign up form and the email address/password combination will be used to authenticate the user.  When set to <code>true</code> usernames will be used.</p></li>
<li><p><code>sendWelcomeEmail</code>: if the to <code>true</code> a welcome email will be sent to users after sign up.</p></li>
<li><p><code>enableGravatarSupport</code>: if set to <code>true</code> Gravatar will be used to retrieve a profile image for the user.  If set to <code>false</code> it will be left empty.</p></li>
<li><p><code>tokenDuration</code>: Every time a user signs up or attempts a password reset SecureSocial will generate a token that identifies that request.  Each token has an expiration date and this property is used to compute it. This value is expressed in <strong>minutes</strong> and is set to 60 by default.</p></li>
<li><p><code>tokenDeleteInterval</code>: This property defines how often the <code>deleteExpiredTokens()</code> method in <code>UserService</code> gets called. This value is expressed in <strong>minutes</strong> and is set to 5 by default.</p></li>
<li><p><code>minimumPasswordLength</code>: Defines the minimum password length the user can enter. Defaults to 6 if not specified. </p></li>
<li><p><code>enableTokenJob</code>: Enables/disables the background job used to delete sign up and reset password tokens.</p></li>
<li><p><code>hasher</code>: Specifies the current password hasher. </p></li>
</ul>
<p>For example:</p>

<div class="highlight"><pre>userpass <span class="o">{</span>      
    <span class="nv">withUserNameSupport</span><span class="o">=</span><span class="nb">false</span>
<span class="nb">    </span><span class="nv">sendWelcomeEmail</span><span class="o">=</span><span class="nb">true</span>
<span class="nb">    </span><span class="nv">enableGravatarSupport</span><span class="o">=</span><span class="nb">true</span>
<span class="nb">    </span><span class="nv">tokenDuration</span><span class="o">=</span>60
    <span class="nv">tokenDeleteInterval</span><span class="o">=</span>5
    <span class="nv">minimumPasswordLength</span><span class="o">=</span>8
    <span class="nv">enableTokenJob</span><span class="o">=</span><span class="nb">true</span>
<span class="nb">    </span><span class="nv">hasher</span><span class="o">=</span>bcrypt
<span class="o">}</span>
</pre></div>

<h3>OAuth based Providers</h3>

<p>The configuration for these providers is simple, just specify the endpoints and OAuth values generated by the external service.</p>

<p>A configuration would like like:</p>

<div class="highlight"><pre>twitter <span class="o">{</span>
    <span class="nv">requestTokenUrl</span><span class="o">=</span><span class="s2">"https://twitter.com/oauth/request_token"</span>
    <span class="nv">accessTokenUrl</span><span class="o">=</span><span class="s2">"https://twitter.com/oauth/access_token"</span>
    <span class="nv">authorizationUrl</span><span class="o">=</span><span class="s2">"https://twitter.com/oauth/authenticate"</span>
    <span class="nv">consumerKey</span><span class="o">=</span>your_consumer_key
    <span class="nv">consumerSecret</span><span class="o">=</span>your_consumer_secret
<span class="o">}</span>

facebook <span class="o">{</span>
    <span class="nv">authorizationUrl</span><span class="o">=</span><span class="s2">"https://graph.facebook.com/oauth/authorize"</span>
    <span class="nv">accessTokenUrl</span><span class="o">=</span><span class="s2">"https://graph.facebook.com/oauth/access_token"</span>
    <span class="nv">clientId</span><span class="o">=</span>your_client_id
    <span class="nv">clientSecret</span><span class="o">=</span>your_client_secret
    <span class="c"># this scope is the minimum SecureSocial requires.  You can add more if required by your app.</span>
    <span class="nv">scope</span><span class="o">=</span>email
<span class="o">}</span>

google <span class="o">{</span>
    <span class="nv">authorizationUrl</span><span class="o">=</span><span class="s2">"https://accounts.google.com/o/oauth2/auth"</span>
    <span class="nv">accessTokenUrl</span><span class="o">=</span><span class="s2">"https://accounts.google.com/o/oauth2/token"</span>
    <span class="nv">clientId</span><span class="o">=</span>your_client_id
    <span class="nv">clientSecret</span><span class="o">=</span>your_client_secret
    <span class="nv">scope</span><span class="o">=</span><span class="s2">"https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email"</span>
<span class="o">}</span>

linkedin <span class="o">{</span>
    <span class="nv">requestTokenUrl</span><span class="o">=</span><span class="s2">"https://api.linkedin.com/uas/oauth/requestToken"</span>
    <span class="nv">accessTokenUrl</span><span class="o">=</span><span class="s2">"https://api.linkedin.com/uas/oauth/accessToken"</span>
    <span class="nv">authorizationUrl</span><span class="o">=</span><span class="s2">"https://api.linkedin.com/uas/oauth/authenticate"</span>
    <span class="nv">consumerKey</span><span class="o">=</span>your_consumer_key
    <span class="nv">consumerSecret</span><span class="o">=</span>your_consumer_secret
<span class="o">}</span>

github <span class="o">{</span>
    <span class="nv">authorizationUrl</span><span class="o">=</span><span class="s2">"https://github.com/login/oauth/authorize"</span>
    <span class="nv">accessTokenUrl</span><span class="o">=</span><span class="s2">"https://github.com/login/oauth/access_token"</span>
    <span class="nv">clientId</span><span class="o">=</span>your_client_id
    <span class="nv">clientSecret</span><span class="o">=</span>your_client_secret
<span class="o">}</span>
</pre></div>

<p>To get the <code>clientId</code>/<code>clientSecret</code> or <code>consumerKey</code>/<code>consumerSecret</code> keys you need to log into the developer site of each service (eg: Twitter, Facebook) and register your application.</p>

<p><em>Hint: you can use the <code>securesocial.conf</code> file in the sample apps as a starting point.</em></p>

<h2>Clustered environments</h2>

<p>SecureSocial uses the Play cache to store values while signing in users via OAuth.  If you have more than one server then make sure to use a distributed cache (eg: memcached).</p>

            </div>
          </section>
</div>
      </div>
    </div>
    <footer style="padding: 30px 0;margin-top: 70px;border-top: 1px solid #E5E5E5;background-color: whiteSmoke;"><div class="container">
		<p> <a href="https://github.com/jaliss/securesocial">View on Github</a></p>        
        <p>Designed and developed by <a href="http://twitter.com/jaliss" target="_blank">@jaliss</a>.</p>
        <p>Code licensed under <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank">Apache License v2.0</a>, documentation under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.</p>
        <p>© 2011-2012 Jorge Aliss       
    </p>
</div>
       
</footer><script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-1441023-12']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</body>
</html>
